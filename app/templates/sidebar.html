{% load static %}

<script>
    (async function() {
        try {
            const response = await fetch('{{ api_url }}/projects/?userIDs=6521d8581bcf69b7d260608b'); // TODO: REPLACE userID w/ reference
            if (!response.ok) throw new Error('Network response was not ok');
            const projects = await response.json();

            const projectListElement = document.getElementById('project-list');
            projects.forEach(function(project) {
                const listLink = document.createElement('a');
                listLink.href = `/project/${project.id}`;
                listLink.textContent = project.name;
                listLink.className = "flex p-1  hover:text-gray-500  truncate w-32";
                projectListElement.appendChild(listLink);
                
            });

        } catch (error) {
            console.error('There has been a problem with fetching projects:', error);
        }
    })();
</script>

<div class="bg-neutral-800 min-h-screen p-4 text-white">

    <div class="mt-4 text-xl text-center font-medium rounded-lg  py-1 bg-neutral-600 hover:bg-gray-500">
        <a href="/create-project"> + Project</a>
    </div>

    <div class="mt-10">
        <div class="text-xl font-medium pt-4 pb-2"> Projects</div>
        <ul class id="project-list"></ul>
    </div>

</div>